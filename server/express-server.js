const express = require('express');
const morgan = require('morgan'); // outputs request data / status
const cors = require('cors');

//////////////////////////////////////////////////////////////////
// Configuration / Set-Up
//////////////////////////////////////////////////////////////////

const app = express();
const PORT = 7777;

//////////////////////////////////////////////////////////////////
// Middleware
//////////////////////////////////////////////////////////////////

app.use(express.urlencoded({extended: true})); // for form submission
app.use(express.json()); // Important for AJAX JSON sending as body to server!
app.use(morgan('dev'));
app.use(cors()); // WARNING: In real world, read the docs: https://www.npmjs.com/package/cors

//////////////////////////////////////////////////////////////////
// Listener
//////////////////////////////////////////////////////////////////

app.listen(PORT, () => {
    console.log('Express app is listening on port:', PORT);
});

//////////////////////////////////////////////////////////////////
// Routes
//////////////////////////////////////////////////////////////////

const toDoRouter = require('./routes/to-do-router');
app.use('/to-dos', toDoRouter);
